'/bootstrap':signature(counterIf(Value,Thread,Trans,TS)::counterExpr,[Value::counterExpr,Thread::'/bootstrap':string,Trans::'/bootstrap':number,TS::'/bootstrap':number]).
'/bootstrap':projection(counterIf(Value,Thread,Trans,TS)::counterExpr,'/bootstrap':horiz(['/bootstrap':vis(Value::counterExpr),'/bootstrap':label(!if),'/bootstrap':vis(Thread::'/bootstrap':string),'/bootstrap':symbol(8805),'/bootstrap':vis(Trans::'/bootstrap':number),'/bootstrap':label(!until),'/bootstrap':vis(TS::'/bootstrap':number)])).
'/util':behavior(counterIf(Value,Thread,Trans,TS)::counterExpr,!'should evaluate to Value if TS has passed', ('/impred':simulate('/impred':with('/impred':now,300,'/bootstrap':number,evalCounter(counterIf(counterValue(4),!thr,3,200),V)),[],'/impred':true),builtin:equals(V::'/bootstrap':number,4::'/bootstrap':number))).
annotation:shrink('/impred':clause(evalCounter(counterIf(Value,Thread,Transaction,TS),V),'/impred':conj('/impred':eval('/impred':call('/impred':now),'/bootstrap':number,Now),'/impred':if('/impred':pred(builtin:greaterThen(Now,TS)),evalCounter(Value,V),'/impred':conj('/impred':eval('/impred':localGet(Thread,localNum(0)),'/impred':localStoreVal,localNum(LastTransaction)),'/impred':if('/impred':pred('/Functional':ge('/Functional':const(LastTransaction),'/Functional':const(Transaction),'/bootstrap':number)),evalCounter(Value,V),'/impred':pred(V::'/bootstrap':number=0::'/bootstrap':number))))))).
'/util':behavior(counterIf(Value,Thread,Trans,TS)::counterExpr,!'should evaluate to 0 if TS has not passed (for now)', ('/impred':simulate('/impred':with('/impred':now,100,'/bootstrap':number,evalCounter(counterIf(counterValue(4),!thr,3,200),V)),['/impred':task('/impred':localGet(!thr),_,'/impred':localStoreVal)],'/impred':true),builtin:equals(V::'/bootstrap':number,0::'/bootstrap':number))).
'/util':behavior(counterIf(Value,Thread,Trans,TS)::counterExpr,!'should evaluate to Value if Thread has a transaction value of Trans or more', ('/impred':simulate('/impred':with('/impred':localGet(!thr),localNum(4),'/impred':localStoreVal,'/impred':with('/impred':now,100,'/bootstrap':number,evalCounter(counterIf(counterValue(4),!thr,3,200),V))),[],'/impred':true),builtin:equals(V::'/bootstrap':number,4::'/bootstrap':number))).
