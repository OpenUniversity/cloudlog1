'/nodalion':serve('cl1','/nodalion':get,!'/q/:hash',['/nodalion':with('/nodalion':jsonObj(['/nodalion':field(!params,Params),'/nodalion':field(!query,'/nodalion':jsonObj(QueryArgs))]),'/impred':conj('/impred':pred(('/Functional':eval('/nodalion':asString('/nodalion':jsonMember('/Functional':const(Params),!hash)),'/bootstrap':string,Hash),initialContext(QueryArgs,CtxIn))),'/impred':conj('/impred':task('/nodalion':ipfsCat(Hash),QueryStr,'/bootstrap':string),'/impred':conj('/impred':pred((parseCloudlog(!q,QueryStr,['/cloudlog':package(!somePackage)|CtxIn],Goal::'/cloudlog':pred,Ctx),contextToQueryResult(Ctx,ResultFields))),'/nodalion':findall('/nodalion':jsonObj(['/nodalion':field(!'_count','/nodalion':jsonNum(Count))|ResultFields]),'/nodalion':json,'/cloudlog':logicQuery(Goal,Count),Results)))),['/nodalion':outputJson('/nodalion':jsonList(Results))])]).
'/bootstrap':signature(contextToQueryResult(Ctx,ResultFields)::'/bootstrap':pred,[Ctx::'/bootstrap':list('/cloudlog':ctxElem),ResultFields::'/bootstrap':list('/nodalion':jsonField)]).
contextToQueryResult([],[]):-builtin:true.
annotation:shrink((contextToQueryResult([First|Rest],ResultFields):-builtin:if(First::'/cloudlog':ctxElem='/cloudlog':varName(Var::Type,Name)::'/cloudlog':ctxElem,ResultFields::'/bootstrap':list('/nodalion':jsonField)=['/nodalion':field(Name,'/nodalion':jsonTypedTerm(Var,Type))|ResultFieldsPrime]::'/bootstrap':list('/nodalion':jsonField),ResultFields::'/bootstrap':list('/nodalion':jsonField)=ResultFieldsPrime::'/bootstrap':list('/nodalion':jsonField)),contextToQueryResult(Rest,ResultFieldsPrime))).
'/bootstrap':signature(initialContext(QueryArgs,CtxIn)::'/bootstrap':pred,[QueryArgs::'/bootstrap':list('/nodalion':jsonField),CtxIn::'/bootstrap':list('/cloudlog':ctxElem)]).
initialContext([],[]):-builtin:true.
initialContext(['/nodalion':field(Name,'/nodalion':jsonStr(Value))|QueryArgs],Ctx):-builtin:if(builtin:strcat(!'import-',LocalName,Name),Ctx::'/bootstrap':list('/cloudlog':ctxElem)=['/cloudlog':import(LocalName,Value)|CtxPrime]::'/bootstrap':list('/cloudlog':ctxElem),Ctx::'/bootstrap':list('/cloudlog':ctxElem)=CtxPrime::'/bootstrap':list('/cloudlog':ctxElem)),initialContext(QueryArgs,CtxPrime).
