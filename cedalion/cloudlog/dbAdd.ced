'/bootstrap':signature(dbAdd(Axiom,Value,Matches)::'/impred':impred,[Axiom::axiom,Value::'/bootstrap':number,Matches::'/bootstrap':list('/nodalion':databaseValue(_,axiom,_))]).
'/util':behavior(dbAdd(Axiom,Value,Matches)::'/impred':impred,!'should add Value to a counter corresponding with the axiom', ('/impred':simulate(dbAdd(example:someFact(1,2),7,_),['/impred':task('/nodalion':trans(Table,1,['/nodalion':addToCounter(!facts,Fact,Value),'/nodalion':getAllCounters(!rules)]),_,'/bootstrap':list('/nodalion':databaseValue('/bootstrap':number,axiom,_)))],'/impred':true),'/util':assertEqual(Fact,example:someFact(1,2),axiom),'/util':assertEqual(Value,7,'/bootstrap':number),'/util':assertEqual(Table,!'example#someFact','/bootstrap':string))).
'/util':behavior(dbAdd(Axiom,Value,Matches)::'/impred':impred,!'should provide the database query results in Matches', ('/impred':simulate(dbAdd(example:someFact(1,2),7,Matches),['/impred':task('/nodalion':trans(Table,1,['/nodalion':addToCounter(!facts,Fact,Value),'/nodalion':getAllCounters(!rules)]),annotation:changeMode(['/nodalion':counterValue(!rules,rule(example:someFact(1,X),builtin:true,example:someFact(3,X)),1),'/nodalion':counterValue(!rules,rule(example:someFact(2,X),builtin:true,example:someFact(4,X)),1)],'/bootstrap':vert),'/bootstrap':list('/nodalion':databaseValue('/bootstrap':number,axiom,_)))],'/impred':true),'/util':assertEqual(Matches,['/nodalion':counterValue(!rules,rule(example:someFact(1,X),builtin:true,example:someFact(3,X)),1),'/nodalion':counterValue(!rules,rule(example:someFact(2,X),builtin:true,example:someFact(4,X)),1)],'/bootstrap':list('/nodalion':databaseValue('/bootstrap':number,axiom,_))))).
'/impred':clause(dbAdd(Axiom,Value,Matches),'/impred':conj('/impred':pred((tableName(Axiom,Table),axiomFamily(Axiom,Family,Key::T),match(Axiom,_,MatchFamily))),'/impred':task('/nodalion':trans(Table,Key,['/nodalion':addToCounter(Family,Axiom,Value),'/nodalion':getAllCounters(MatchFamily)]),Matches,'/bootstrap':list('/nodalion':databaseValue(T,axiom,_))))).
'/bootstrap':signature(tableName(Axiom,Table)::'/bootstrap':pred,[Axiom::axiom,Table::'/bootstrap':string]).
'/util':behavior(tableName(Axiom,Name)::'/bootstrap':pred,!'should provide the triggerring fact\'s name for rules', (tableName(rule(example:someFact(1,X),builtin:true,example:someFact(3,X)),Name),'/util':assertEqual(Name,!'example#someFact','/bootstrap':string))).
tableName(Axiom,Table):-builtin:if(Axiom::axiom=rule(Fact,_,_)::axiom,tableName(Fact,Table),builtin:parseTerm(Axiom::axiom,Table,_)).
