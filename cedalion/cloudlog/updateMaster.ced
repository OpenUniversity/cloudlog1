'/bootstrap':signature(updateMaster(Table,Row,Type,NewVer)::'/impred':impred,[Table::'/bootstrap':string,Row::Type,Type::'/bootstrap':type,NewVer::'/bootstrap':number]).
'/util':behavior(updateMaster(Table,Row,Type,NewVer)::'/impred':impred,!'should update the version and query for the version and all facts','/impred':simulate(updateMaster(!tbl,2,'/bootstrap':number,9),['/impred':task('/nodalion':trans(!tbl,2,['/nodalion':set(!master,version,[9]),'/nodalion':get(!master,version),'/nodalion':getAllCounters(!facts)]),['/nodalion':value(!master,version,[7])],'/bootstrap':list('/nodalion':databaseValue('/bootstrap':number,axiom,'/bootstrap':number)))],_)).
'/util':behavior(updateMaster(Table,Row,Type,NewVer)::'/impred':impred,!'should apply the difference between the desired version and the existing one to the facts in the row','/impred':simulate('/impred':with('/impred':localGet(!'tbl:9'),masterRules(['/nodalion':counterValue(!rules,rule(example:someFact(2,X),builtin:true,example:someFact(X,2)),1)]),'/impred':localStoreVal,'/impred':with('/impred':localGet(!'tbl:7'),masterRules(['/nodalion':counterValue(!rules,rule(example:someFact(2,X),builtin:true,example:someFact(X,1)),1)]),'/impred':localStoreVal,updateMaster(!tbl,2,'/bootstrap':number,9))),['/impred':task('/nodalion':trans(!tbl,2,['/nodalion':set(!master,version,[9]),'/nodalion':get(!master,version),'/nodalion':getAllCounters(!facts)]),annotation:changeMode(['/nodalion':value(!master,version,[7]),'/nodalion':counterValue(!facts,example:someFact(2,2),1),'/nodalion':counterValue(!facts,example:someFact(2,3),1)],'/bootstrap':vert),'/bootstrap':list('/nodalion':databaseValue('/bootstrap':number,axiom,'/bootstrap':number))),'/impred':task('/nodalion':par('/nodalion':findAll('/nodalion':enqueueJob(trans([addition(example:someFact(2,2),1)])),'/nodalion':enqueueJob(trans([addition(example:someFact(2,2),1)]))),'/nodalion':findAll(enqueueAdditions([addition(example:someFact(2,1),-1),addition(example:someFact(3,2),1),addition(example:someFact(3,1),-1)]),enqueueAdditions([addition(example:someFact(2,1),-1),addition(example:someFact(3,2),1),addition(example:someFact(3,1),-1)]))),'/bootstrap':pair(_,_),'/bootstrap':pairType('/bootstrap':list('/impred':impred),'/bootstrap':list('/impred':impred)))],'/impred':true)).
annotation:shrink('/impred':clause(updateMaster(Table,Row,Type,NewVer),'/impred':conj('/impred':task('/nodalion':trans(Table,Row,['/nodalion':set(!master,version,[NewVer]),'/nodalion':get(!master,version),'/nodalion':getAllCounters(!facts)]),Results,'/bootstrap':list('/nodalion':databaseValue(Type,axiom,'/bootstrap':number))),'/impred':conj(getMasterRules(Table,Results,OldRules),'/impred':conj(getMasterRules(Table,['/nodalion':value(!master,version,[NewVer])],NewRules),'/impred':conj('/impred':pred('/Functional':eval('/Functional':applyBinOp(dbResults(Results),mult,annotation:parentheses('/Functional':applyBinOp(dbResults(NewRules),minus,dbResults(OldRules)))),'/bootstrap':list(addition),Additions)),enqueueAdditions(Additions))))))).
